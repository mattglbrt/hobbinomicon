---
/**
 * ListCard Component
 * Horizontal card with thumbnail for list displays
 * Supports light and dark color schemes
 */

interface Props {
  href: string;
  image?: string | null;
  imageAlt?: string;
  title: string;
  description?: string;
  meta?: string;
  /**
   * Color scheme:
   * - 'light': Dark text on light background (default)
   * - 'dark': Light text on dark/transparent background
   */
  scheme?: 'light' | 'dark';
  /**
   * Thumbnail size:
   * - 'sm': 24x24 (96px)
   * - 'md': 32x32 (128px)
   */
  size?: 'sm' | 'md';
  /**
   * Show left border accent
   */
  borderAccent?: boolean;
  class?: string;
}

const {
  href,
  image,
  imageAlt,
  title,
  description,
  meta,
  scheme = 'light',
  size = 'sm',
  borderAccent = false,
  class: className,
} = Astro.props;

// Size classes for thumbnail
const sizeClasses = {
  sm: 'w-24 h-24',
  md: 'w-24 h-24 md:w-32 md:h-32',
};

// Color scheme classes
const schemeClasses = {
  light: {
    wrapper: 'bg-ink/5 hover:bg-ink/10',
    border: 'border-ink/30 hover:border-ink',
    title: 'text-ink',
    description: 'text-ink/80',
    meta: 'text-ink/70',
  },
  dark: {
    wrapper: 'bg-white/5 hover:bg-white/10',
    border: 'border-white/30 hover:border-white',
    title: 'text-white',
    description: 'text-white/70',
    meta: 'text-white/60',
  },
};

const colors = schemeClasses[scheme];
---

<a
  href={href}
  class:list={[
    'group flex gap-4 p-4 rounded-lg transition-all',
    colors.wrapper,
    borderAccent && `border-l-4 ${colors.border} rounded-l-none`,
    className,
  ]}
>
  {image && (
    <div class:list={['flex-shrink-0 overflow-hidden rounded-lg', sizeClasses[size]]}>
      <img
        src={image}
        alt={imageAlt || title}
        class="w-full h-full object-cover img-hover"
        loading="lazy"
        decoding="async"
      />
    </div>
  )}
  <div class="flex-grow min-w-0 flex flex-col justify-center">
    {meta && (
      <span class:list={['text-sm mb-1', colors.meta]}>
        {meta}
      </span>
    )}
    <h3 class:list={[
      'text-lg md:text-xl font-heading font-bold group-hover:underline underline-offset-2',
      description ? 'line-clamp-2' : '',
      colors.title,
    ]}>
      {title}
    </h3>
    {description && (
      <p class:list={['text-sm mt-1 line-clamp-2', colors.description]}>
        {description}
      </p>
    )}
    <slot />
  </div>
</a>
