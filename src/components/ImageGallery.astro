---
interface Image {
  src: string;
  alt: string;
  caption?: string;
}

interface Props {
  images: Image[];
  columns?: number;
}

const { images, columns = 2 } = Astro.props;
const gridCols = {
  1: 'grid-cols-1',
  2: 'grid-cols-1 md:grid-cols-2',
  3: 'grid-cols-1 md:grid-cols-2 lg:grid-cols-3',
  4: 'grid-cols-1 md:grid-cols-2 lg:grid-cols-4',
};
---

<div class={`image-gallery grid ${gridCols[columns]} gap-6 my-8`}>
  {images.map((image) => (
    <figure class="group">
      <div class="relative overflow-hidden rounded-lg shadow-lg">
        <img
          src={image.src}
          alt={image.alt}
          class="w-full h-auto img-hover-slow"
          loading="lazy"
        />
      </div>
      {image.caption && (
        <figcaption class="text-sm text-ink/70 italic mt-2 text-center">
          {image.caption}
        </figcaption>
      )}
    </figure>
  ))}
</div>

<style>
  .image-gallery img {
    display: block;
  }
</style>
