---
import PostCard from './PostCard.astro';

interface Post {
  slug: string;
  data: {
    title: string;
    description: string;
    heroImage?: string;
    heroImageAlt?: string;
    category: string;
    pubDate: Date;
    tags: string[];
    youtubeId?: string;
  };
}

interface Props {
  title: string;
  viewAllLink: string;
  viewAllText?: string;
  posts: Post[];
  eagerCount?: number;
}

const { title, viewAllLink, viewAllText = 'View All â†’', posts, eagerCount = 3 } = Astro.props;
---

{posts.length > 0 && (
  <section class="bg-parchment dark:bg-parchment-dark py-16 md:py-24">
    <div class="max-w-7xl mx-auto px-6">
      <div class="flex items-center justify-between mb-12">
        <h2 class="text-4xl md:text-5xl font-heading font-bold text-ink dark:text-ink-dark">{title}</h2>
        <a href={viewAllLink} class="text-ink dark:text-ink-dark hover:underline underline-offset-4 transition-all">
          {viewAllText}
        </a>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {posts.map((post, index) => (
          <PostCard
            slug={post.slug}
            title={post.data.title}
            description={post.data.description}
            heroImage={post.data.heroImage}
            heroImageAlt={post.data.heroImageAlt}
            category={post.data.category}
            pubDate={post.data.pubDate}
            tags={post.data.tags}
            youtubeId={post.data.youtubeId}
            eager={index < eagerCount}
          />
        ))}
      </div>
    </div>
  </section>
)}
